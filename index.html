<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Bookì Bookì  - í•™êµ ë„ì„œ ì¶”ì²œ í‚¤ì˜¤ìŠ¤í¬</title>
    
    <!-- Tailwind CSS (ìŠ¤íƒ€ì¼) -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React & ReactDOM (ë¦¬ì•¡íŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬) -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel (ë¸Œë¼ìš°ì €ì—ì„œ JSX ì‹¤í–‰) -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- ëª¨ë°”ì¼ í„°ì¹˜ ìµœì í™” ìŠ¤íƒ€ì¼ -->
    <style>
        /* ìŠ¤í¬ë¡¤ë°” ìˆ¨ê¸°ê¸° */
        .scrollbar-hide::-webkit-scrollbar {
            display: none;
        }
        .scrollbar-hide {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        /* ëª¨ë°”ì¼ ì•ˆì „ ì˜ì—­ í™•ë³´ */
        .pb-safe-area {
            padding-bottom: env(safe-area-inset-bottom);
        }
        body {
            -webkit-tap-highlight-color: transparent;
            background-color: #f3f4f6; /* bg-gray-100 */
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- ì•„ì´ì½˜ ì»´í¬ë„ŒíŠ¸ (Lucide ì•„ì´ì½˜ì„ SVGë¡œ ì§ì ‘ êµ¬í˜„) ---
        const IconBase = ({ size = 24, className = "", children }) => (
            <svg 
                xmlns="http://www.w3.org/2000/svg" 
                width={size} 
                height={size} 
                viewBox="0 0 24 24" 
                fill="none" 
                stroke="currentColor" 
                strokeWidth="2" 
                strokeLinecap="round" 
                strokeLinejoin="round" 
                className={className}
            >
                {children}
            </svg>
        );

        const BookOpen = (props) => <IconBase {...props}><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/></IconBase>;
        const GraduationCap = (props) => <IconBase {...props}><path d="M22 10v6M2 10l10-5 10 5-10 5z"/><path d="M6 12v5c3 3 9 3 12 0v-5"/></IconBase>;
        const MessageSquarePlus = (props) => <IconBase {...props}><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2-2z"/><line x1="9" y1="10" x2="15" y2="10"/><line x1="12" y1="7" x2="12" y2="13"/></IconBase>;
        const Star = ({ fill = "none", ...props }) => <IconBase {...props}><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2" fill={fill} /></IconBase>;
        const X = (props) => <IconBase {...props}><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></IconBase>;
        const ThumbsUp = (props) => <IconBase {...props}><path d="M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3"/></IconBase>;
        const Send = (props) => <IconBase {...props}><line x1="22" y1="2" x2="11" y2="13"/><polygon points="22 2 15 22 11 13 2 9 22 2"/></IconBase>;

        // --- Mock Data ---
        const MOCK_MAJORS = ["ì»´í“¨í„°ê³µí•™", "ê²½ì˜í•™", "ì‹œê°ë””ìì¸", "ì‹¬ë¦¬í•™", "ê±´ì¶•í•™", "êµ­ì–´êµ­ë¬¸"];

        const INITIAL_BOOKS = [
            { id: 1, title: "í´ë¦° ì½”ë“œ", author: "ë¡œë²„íŠ¸ C. ë§ˆí‹´", major: "ì»´í“¨í„°ê³µí•™", rating: 4.8, reviews: [{ user: "ìµëª…", text: "ê°œë°œìì˜ í•„ë…ì„œ!", rating: 5 }], color: "bg-indigo-500" },
            { id: 2, title: "ë§ˆì¼€íŒ… ë¶ˆë³€ì˜ ë²•ì¹™", author: "ì•Œ ë¦¬ìŠ¤", major: "ê²½ì˜í•™", rating: 4.5, reviews: [{ user: "ìµëª…", text: "ê³ ì „ì´ì§€ë§Œ í•„ìˆ˜.", rating: 4 }], color: "bg-red-500" },
            { id: 3, title: "ë””ìì¸ì˜ ê°€ì¹˜", author: "í”„ë­í¬", major: "ì‹œê°ë””ìì¸", rating: 4.7, reviews: [], color: "bg-yellow-500" },
            { id: 4, title: "ë¯¸ì›€ë°›ì„ ìš©ê¸°", author: "ê¸°ì‹œë¯¸ ì´ì¹˜ë¡œ", major: "ì‹¬ë¦¬í•™", rating: 4.9, reviews: [{ user: "ìµëª…", text: "ì¸ê°„ê´€ê³„ì˜ í•´ë²•.", rating: 5 }, { user: "ìµëª…", text: "ë§ˆìŒì´ í¸í•´ì§", rating: 5 }], color: "bg-green-500" },
            { id: 5, title: "ê±´ì¶•ì˜ ê³µê°„", author: "ì´ê±´ì¶•", major: "ê±´ì¶•í•™", rating: 4.2, reviews: [], color: "bg-slate-500" },
            { id: 6, title: "ìš°ë¦¬ë§ì˜ ë¬˜ë¯¸", author: "ê¹€êµ­ì–´", major: "êµ­ì–´êµ­ë¬¸", rating: 4.6, reviews: [], color: "bg-blue-400" },
            { id: 7, title: "í•´ë¦¬í¬í„°ì™€ ë§ˆë²•ì‚¬ì˜ ëŒ", author: "J.K. ë¡¤ë§", major: "ê³µí†µ", rating: 4.9, reviews: [{ user: "ìµëª…", text: "ì–¸ì œ ì½ì–´ë„ ëª…ì‘", rating: 5 }], color: "bg-purple-600" },
            { id: 8, title: "ì´, ê· , ì‡ ", author: "ì¬ë ˆë“œ ë‹¤ì´ì•„ëª¬ë“œ", major: "ê³µí†µ", rating: 4.4, reviews: [], color: "bg-stone-600" },
        ];

        const INITIAL_REQUESTS = [
            { id: 1, title: "ë¦¬ì•¡íŠ¸ ë”¥ë‹¤ì´ë¸Œ", reason: "í”„ë¡ íŠ¸ì—”ë“œ ê³µë¶€í•˜ê³  ì‹¶ì–´ìš”!", likes: 12 },
            { id: 2, title: "ì±„ì‹ì£¼ì˜ì", reason: "ë§¨ë¶€ì»¤ìƒ ìˆ˜ìƒì‘ ì½ì–´ë³´ê³  ì‹¶ìŠµë‹ˆë‹¤.", likes: 8 },
        ];

        // --- Components ---

        const Header = () => (
            <header className="bg-blue-600 text-white p-6 shadow-md flex justify-between items-center sticky top-0 z-10">
                <div className="flex items-center space-x-3">
                    <div className="bg-white text-blue-600 p-2 rounded-lg">
                        <BookOpen size={28} />
                    </div>
                    <div>
                        <h1 className="text-2xl font-bold tracking-tight">Bookì Bookì </h1>
                        <p className="text-xs opacity-90">ìš°ë¦¬ í•™êµ ë„ì„œ ì¶”ì²œ í‚¤ì˜¤ìŠ¤í¬</p>
                    </div>
                </div>
                <div className="bg-blue-700 px-4 py-2 rounded-full text-sm font-medium flex items-center">
                    <span className="w-2 h-2 bg-blue-200 rounded-full mr-2 animate-pulse"></span>
                    ìš´ì˜ ì¤‘
                </div>
            </header>
        );

        const Navigation = ({ activeTab, setActiveTab }) => {
            const tabs = [
                { id: 'bestseller', label: 'ë² ìŠ¤íŠ¸ì…€ëŸ¬', icon: Star },
                { id: 'major', label: 'í•™ê³¼ë³„ ì¶”ì²œ', icon: GraduationCap },
                { id: 'request', label: 'ë„ì„œ ì‹ ì²­í•¨', icon: MessageSquarePlus },
            ];

            return (
                <nav className="bg-white border-t border-gray-200 absolute bottom-0 w-full pb-safe-area shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.1)] z-20">
                    <div className="flex justify-around h-20 items-center">
                        {tabs.map((tab) => (
                            <button
                                key={tab.id}
                                onClick={() => setActiveTab(tab.id)}
                                className={`flex flex-col items-center justify-center w-full h-full transition-colors duration-200 ${
                                    activeTab === tab.id ? 'text-blue-600 bg-blue-50' : 'text-gray-400 hover:text-gray-600'
                                }`}
                            >
                                <tab.icon size={28} strokeWidth={activeTab === tab.id ? 2.5 : 2} fill={activeTab === tab.id && tab.id === 'bestseller' ? "currentColor" : "none"} />
                                <span className="text-sm font-medium mt-1">{tab.label}</span>
                            </button>
                        ))}
                    </div>
                </nav>
            );
        };

        const BookCard = ({ book, onClick }) => (
            <div 
                onClick={() => onClick(book)}
                className="bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden active:scale-95 transition-transform duration-100 cursor-pointer flex flex-col h-full"
            >
                <div className={`h-40 ${book.color} flex items-center justify-center p-4 text-center`}>
                    <span className="text-white font-bold text-lg drop-shadow-md line-clamp-2">{book.title}</span>
                </div>
                <div className="p-4 flex-1 flex flex-col justify-between">
                    <div>
                        <div className="text-xs text-blue-500 font-bold mb-1">{book.major === 'ê³µí†µ' ? 'êµì–‘ ë² ìŠ¤íŠ¸' : `${book.major} ì¶”ì²œ`}</div>
                        <h3 className="font-bold text-gray-800 leading-tight mb-1 truncate">{book.title}</h3>
                        <p className="text-sm text-gray-500 truncate">{book.author}</p>
                    </div>
                    <div className="flex items-center mt-3 text-yellow-500 text-sm font-bold">
                        <Star size={16} fill="currentColor" className="mr-1" />
                        {book.rating}
                        <span className="text-gray-300 font-normal ml-2 text-xs">ë¦¬ë·° {book.reviews.length}</span>
                    </div>
                </div>
            </div>
        );

        const Modal = ({ isOpen, onClose, children }) => {
            if (!isOpen) return null;
            return (
                <div className="fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200">
                    <div className="bg-white rounded-2xl w-full max-w-lg max-h-[90vh] overflow-y-auto shadow-2xl animate-in zoom-in-95 duration-200 relative">
                        <button 
                            onClick={onClose}
                            className="absolute top-4 right-4 bg-gray-100 p-2 rounded-full text-gray-500 hover:bg-gray-200"
                        >
                            <X size={24} />
                        </button>
                        {children}
                    </div>
                </div>
            );
        };

        const BestsellerView = ({ books, onBookClick }) => (
            <div className="p-6 pb-24 space-y-6 animate-in slide-in-from-right-4 duration-300">
                <div className="flex justify-between items-end">
                    <div>
                        <h2 className="text-2xl font-bold text-gray-800">ì´ë‹¬ì˜ ë² ìŠ¤íŠ¸ì…€ëŸ¬ ğŸ†</h2>
                        <p className="text-gray-500">ìš°ë¦¬ í•™êµ í•™ìƒë“¤ì´ ê°€ì¥ ë§ì´ ì½ì€ ì±…ì´ì—ìš”.</p>
                    </div>
                </div>
                
                <div className="grid grid-cols-2 md:grid-cols-3 gap-4">
                    {books.sort((a, b) => b.rating - a.rating).map((book) => (
                        <BookCard key={book.id} book={book} onClick={onBookClick} />
                    ))}
                </div>
            </div>
        );

        const MajorView = ({ books, majors, onBookClick }) => {
            const [selectedMajor, setSelectedMajor] = useState("ì»´í“¨í„°ê³µí•™");
            const filteredBooks = books.filter(b => b.major === selectedMajor || b.major === 'ê³µí†µ');

            return (
                <div className="p-6 pb-24 h-full flex flex-col animate-in slide-in-from-right-4 duration-300">
                    <div className="mb-6">
                        <h2 className="text-2xl font-bold text-gray-800 mb-2">í•™ê³¼ë³„ ì¶”ì²œ ë„ì„œ ğŸ“</h2>
                        <p className="text-gray-500 mb-4">ì„ ë°°ë‹˜ë“¤ê³¼ êµìˆ˜ë‹˜ì´ ì¶”ì²œí•˜ëŠ” í•„ë…ì„œ!</p>
                        
                        <div className="flex overflow-x-auto space-x-2 pb-2 scrollbar-hide">
                            {majors.map((major) => (
                                <button
                                    key={major}
                                    onClick={() => setSelectedMajor(major)}
                                    className={`whitespace-nowrap px-4 py-2 rounded-full text-sm font-medium transition-colors ${
                                        selectedMajor === major 
                                            ? 'bg-blue-600 text-white shadow-md' 
                                            : 'bg-white text-gray-600 border border-gray-200'
                                    }`}
                                >
                                    {major}
                                </button>
                            ))}
                        </div>
                    </div>

                    <div className="grid grid-cols-2 md:grid-cols-3 gap-4 overflow-y-auto">
                        {filteredBooks.length > 0 ? (
                            filteredBooks.map((book) => (
                                <BookCard key={book.id} book={book} onClick={onBookClick} />
                            ))
                        ) : (
                            <div className="col-span-full py-12 text-center text-gray-400">
                                ì¶”ì²œ ë„ì„œê°€ ì•„ì§ ë“±ë¡ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        const RequestView = ({ requests, onRequestAdd, onLike }) => {
            const [newTitle, setNewTitle] = useState("");
            const [newReason, setNewReason] = useState("");

            const handleSubmit = (e) => {
                e.preventDefault();
                if (!newTitle.trim() || !newReason.trim()) return;
                onRequestAdd({ title: newTitle, reason: newReason });
                setNewTitle("");
                setNewReason("");
            };

            return (
                <div className="p-6 pb-24 animate-in slide-in-from-right-4 duration-300">
                    <div className="bg-blue-50 rounded-xl p-6 mb-8 border border-blue-100">
                        <h2 className="text-xl font-bold text-blue-800 mb-2 flex items-center">
                            <MessageSquarePlus className="mr-2" /> í•„ìš”í•œ ì±… ì‹ ì²­í•˜ê¸°
                        </h2>
                        <p className="text-sm text-blue-700/80 mb-4">
                            ë„ì„œê´€ì— ì—†ëŠ” ì±…ì´ë‚˜ ì¶”ì²œí•˜ê³  ì‹¶ì€ ì±…ì´ ìˆë‹¤ë©´ ì•Œë ¤ì£¼ì„¸ìš”!
                        </p>
                        <form onSubmit={handleSubmit} className="space-y-3">
                            <input
                                type="text"
                                placeholder="ì±… ì œëª©"
                                className="w-full p-3 rounded-lg border-gray-200 border focus:ring-2 focus:ring-blue-500 focus:outline-none"
                                value={newTitle}
                                onChange={(e) => setNewTitle(e.target.value)}
                            />
                            <textarea
                                placeholder="ì‹ ì²­ ì‚¬ìœ ë‚˜ ì¶”ì²œ ë©˜íŠ¸ë¥¼ ì ì–´ì£¼ì„¸ìš”"
                                className="w-full p-3 rounded-lg border-gray-200 border focus:ring-2 focus:ring-blue-500 focus:outline-none resize-none h-20"
                                value={newReason}
                                onChange={(e) => setNewReason(e.target.value)}
                            />
                            <button 
                                type="submit"
                                className="w-full bg-blue-600 text-white font-bold py-3 rounded-lg hover:bg-blue-700 active:scale-95 transition-all shadow-sm"
                            >
                                ì‹ ì²­ ë“±ë¡í•˜ê¸°
                            </button>
                        </form>
                    </div>

                    <div>
                        <h3 className="text-lg font-bold text-gray-800 mb-4 px-1">ìµœê·¼ ì‹ ì²­ ë‚´ì—­ ({requests.length})</h3>
                        <div className="space-y-3">
                            {requests.map((req) => (
                                <div key={req.id} className="bg-white p-4 rounded-xl border border-gray-100 shadow-sm flex justify-between items-start">
                                    <div>
                                        <h4 className="font-bold text-gray-800">{req.title}</h4>
                                        <p className="text-sm text-gray-600 mt-1">{req.reason}</p>
                                    </div>
                                    <button 
                                        onClick={() => onLike(req.id)}
                                        className="flex flex-col items-center text-gray-400 hover:text-blue-600 transition-colors ml-4"
                                    >
                                        <ThumbsUp size={20} />
                                        <span className="text-xs font-medium mt-1">{req.likes}</span>
                                    </button>
                                </div>
                            ))}
                        </div>
                    </div>
                </div>
            );
        };

        const App = () => {
            const [activeTab, setActiveTab] = useState('bestseller');
            const [books, setBooks] = useState(INITIAL_BOOKS);
            const [requests, setRequests] = useState(INITIAL_REQUESTS);
            const [selectedBook, setSelectedBook] = useState(null);
            
            const [reviewText, setReviewText] = useState("");
            const [reviewRating, setReviewRating] = useState(5);

            const handleAddReview = (e) => {
                e.preventDefault();
                if (!reviewText.trim()) return;

                const newReview = { user: "í•™ìƒ", text: reviewText, rating: reviewRating };
                const updatedBooks = books.map(book => {
                    if (book.id === selectedBook.id) {
                        return { ...book, reviews: [newReview, ...book.reviews] };
                    }
                    return book;
                });

                setBooks(updatedBooks);
                setSelectedBook({ ...selectedBook, reviews: [newReview, ...selectedBook.reviews] });
                setReviewText("");
            };

            const handleAddRequest = (newRequest) => {
                setRequests([{ id: Date.now(), ...newRequest, likes: 0 }, ...requests]);
            };

            const handleLikeRequest = (id) => {
                setRequests(requests.map(req => 
                    req.id === id ? { ...req, likes: req.likes + 1 } : req
                ));
            };

            return (
                <div className="flex flex-col h-screen font-sans text-gray-900 max-w-md mx-auto shadow-2xl overflow-hidden relative bg-gray-50">
                    <Header />

                    <main className="flex-1 overflow-y-auto scrollbar-hide">
                        {activeTab === 'bestseller' && (
                            <BestsellerView books={books} onBookClick={setSelectedBook} />
                        )}
                        {activeTab === 'major' && (
                            <MajorView books={books} majors={MOCK_MAJORS} onBookClick={setSelectedBook} />
                        )}
                        {activeTab === 'request' && (
                            <RequestView requests={requests} onRequestAdd={handleAddRequest} onLike={handleLikeRequest} />
                        )}
                    </main>

                    <Navigation activeTab={activeTab} setActiveTab={setActiveTab} />

                    <Modal isOpen={!!selectedBook} onClose={() => setSelectedBook(null)}>
                        {selectedBook && (
                            <div className="space-y-6">
                                <div className="flex space-x-4">
                                    <div className={`w-28 h-36 ${selectedBook.color} rounded-lg shadow-md flex-shrink-0 flex items-center justify-center p-2 text-center text-white font-bold text-sm`}>
                                        {selectedBook.title}
                                    </div>
                                    <div className="flex-1">
                                        <div className="inline-block px-2 py-1 bg-blue-100 text-blue-700 text-xs rounded-full font-bold mb-2">
                                            {selectedBook.major}
                                        </div>
                                        <h3 className="text-xl font-bold leading-tight mb-1">{selectedBook.title}</h3>
                                        <p className="text-gray-600 mb-2">{selectedBook.author}</p>
                                        <div className="flex items-center text-yellow-500 font-bold">
                                            {[...Array(5)].map((_, i) => (
                                                <Star key={i} size={16} fill={i < Math.floor(selectedBook.rating) ? "currentColor" : "none"} className="mr-0.5" />
                                            ))}
                                            <span className="ml-2 text-gray-400 text-sm">({selectedBook.rating})</span>
                                        </div>
                                    </div>
                                </div>

                                <div className="border-t border-gray-100 pt-6">
                                    <h4 className="font-bold text-gray-800 mb-4 flex items-center">
                                        í•œì¤„í‰ <span className="text-blue-600 ml-1">{selectedBook.reviews.length}</span>
                                    </h4>
                                    
                                    <form onSubmit={handleAddReview} className="flex gap-2 mb-6">
                                        <input 
                                            type="text" 
                                            value={reviewText}
                                            onChange={(e) => setReviewText(e.target.value)}
                                            placeholder="ì§§ê³  êµµì€ í•œì¤„í‰ ë‚¨ê¸°ê¸°..."
                                            className="flex-1 bg-gray-100 rounded-full px-4 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"
                                        />
                                        <button type="submit" className="bg-blue-600 text-white rounded-full p-2 hover:bg-blue-700">
                                            <Send size={18} />
                                        </button>
                                    </form>

                                    <div className="space-y-3 max-h-40 overflow-y-auto pr-1">
                                        {selectedBook.reviews.length > 0 ? (
                                            selectedBook.reviews.map((review, idx) => (
                                                <div key={idx} className="bg-gray-50 p-3 rounded-lg text-sm">
                                                    <div className="flex justify-between items-center mb-1">
                                                        <span className="font-bold text-gray-700">{review.user}</span>
                                                        <div className="flex">
                                                            {[...Array(review.rating)].map((_, i) => <Star key={i} size={10} fill="#F59E0B" className="text-yellow-500" />)}
                                                        </div>
                                                    </div>
                                                    <p className="text-gray-600">{review.text}</p>
                                                </div>
                                            ))
                                        ) : (
                                            <p className="text-center text-gray-400 text-sm py-4">ì²« ë²ˆì§¸ í•œì¤„í‰ì˜ ì£¼ì¸ê³µì´ ë˜ì–´ë³´ì„¸ìš”!</p>
                                        )}
                                    </div>
                                </div>
                                
                                <button 
                                    className="w-full bg-gray-900 text-white py-3 rounded-xl font-bold mt-4 active:scale-95 transition-transform"
                                    onClick={() => alert("ë„ì„œê´€ ìœ„ì¹˜: Aë™ 3ì¸µ 304í˜¸ ì„œê°€")}
                                >
                                    ë„ì„œ ìœ„ì¹˜ í™•ì¸í•˜ê¸°
                                </button>
                            </div>
                        )}
                    </Modal>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById("root"));
        root.render(<App />);
    </script>
</body>
</html>